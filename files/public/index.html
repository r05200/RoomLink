<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RoomLink - Find Your Dream Home</title>
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <!-- Header -->
    <header class="header">
        <div class="header-content">
            <h1>üè† RoomLink - AI-Powered Property Search</h1>
            <p>Find your perfect rental property with natural language search</p>
            <div class="search-bar">
                <input type="text" id="searchInput"
                    placeholder="Try: '2 bedroom apartment under $1800 with parking' or 'pet-friendly condo near university'"
                    onkeypress="handleKeyPress(event)">
                <button id="searchBtn" onclick="searchProperties()">Search</button>
            </div>
            <div class="post-button-container">
                <button id="postPropertyBtn" onclick="openPostModal()">
                    <span>+</span> Post Property
                </button>
            </div>
        </div>
    </header>

    <!-- Main Container -->
    <div class="container">
        <!-- Results Section -->
        <div class="results-section">
            <div class="results-header">
                <div class="results-count" id="resultsCount">All Properties</div>
                <div class="search-criteria" id="searchCriteria" style="display: none;"></div>
            </div>
            <div class="properties-grid" id="propertiesGrid">
                <div class="loading" style="grid-column: 1/-1;">
                    <div class="spinner"></div>
                    <p>Loading properties...</p>
                </div>
            </div>
            <div class="detail-panel" id="detailPanel"></div>
        </div>

        <!-- Map Section -->
        <div class="map-section">
            <div class="map-controls">
                <h3>üîç Search Nearby Places</h3>
                <p style="font-size: 14px; color: #666; margin-bottom: 10px;">
                    Find restaurants, coffee shops, gyms, and more near these properties
                </p>
                <div class="controls-group">
                    <input type="text" id="placesSearchBox" placeholder="e.g., coffee, gym, grocery"
                        onkeypress="handlePlacesKeyPress(event)">
                    <button id="placesSearchBtn" onclick="searchNearbyPlaces()">Search</button>
                </div>
            </div>
            <div id="map"></div>

        </div>
    </div>

    <!-- Post Property Modal -->
    <div id="postModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Post New Property</h2>
                <span class="close" onclick="closePostModal()">&times;</span>
            </div>
            <div class="modal-body">
                <div id="successMessage" class="success-message">
                    ‚úÖ Property posted successfully! Redirecting...
                </div>
                <form id="postPropertyForm" onsubmit="submitProperty(event)">
                    <!-- Property Details -->
                    <h3 style="margin-bottom: 20px; color: #333;">Property Details</h3>

                    <div class="form-group">
                        <label for="address">Address *</label>
                        <input type="text" id="address" name="address" required
                            placeholder="Start typing an address...">
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="latitude">Latitude *</label>
                            <input type="number" id="latitude" name="latitude" step="any" required
                                placeholder="Auto-filled from address">
                        </div>
                        <div class="form-group">
                            <label for="longitude">Longitude *</label>
                            <input type="number" id="longitude" name="longitude" step="any" required
                                placeholder="Auto-filled from address">
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="price">Monthly Rent ($) *</label>
                            <input type="number" id="price" name="price" min="0" required placeholder="e.g., 1500">
                        </div>
                        <div class="form-group">
                            <label for="propertyType">Property Type *</label>
                            <select id="propertyType" name="propertyType" required>
                                <option value="">Select type...</option>
                                <option value="Apartment">Apartment</option>
                                <option value="Condo">Condo</option>
                                <option value="Single Family">Single Family House</option>
                                <option value="Townhouse">Townhouse</option>
                                <option value="Studio">Studio</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="bedrooms">Bedrooms *</label>
                            <select id="bedrooms" name="bedrooms" required>
                                <option value="">Select...</option>
                                <option value="0">Studio</option>
                                <option value="1">1</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5+</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="bathrooms">Bathrooms *</label>
                            <select id="bathrooms" name="bathrooms" required>
                                <option value="">Select...</option>
                                <option value="1">1</option>
                                <option value="1.5">1.5</option>
                                <option value="2">2</option>
                                <option value="2.5">2.5</option>
                                <option value="3">3+</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="sqft">Square Footage *</label>
                        <input type="number" id="sqft" name="sqft" min="100" required placeholder="e.g., 1200">
                    </div>

                    <div class="form-group">
                        <label for="imageUrl">Property Image URL</label>
                        <input type="url" id="imageUrl" name="imageUrl"
                            placeholder="https://example.com/image.jpg (optional)">
                    </div>

                    <div class="form-group">
                        <label for="amenities">Amenities (comma-separated)</label>
                        <input type="text" id="amenities" name="amenities"
                            placeholder="e.g., parking, gym, pool, laundry, balcony">
                    </div>

                    <!-- Roommate Section -->
                    <h3 style="margin: 30px 0 20px 0; color: #333;">Roommate Information</h3>

                    <div class="form-group">
                        <label for="lookingForRoommate">Looking for Roommate?</label>
                        <select id="lookingForRoommate" name="lookingForRoommate" onchange="toggleRoommateFields()">
                            <option value="no">No</option>
                            <option value="yes">Yes</option>
                        </select>
                    </div>

                    <div id="roommateFields" class="roommate-fields">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="roommateCount">Number of Roommates Needed</label>
                                <input type="number" id="roommateCount" name="roommateCount" min="1" max="10"
                                    placeholder="e.g., 1">
                            </div>
                            <div class="form-group">
                                <label for="monthlyRent">Rent per Person ($)</label>
                                <input type="number" id="monthlyRent" name="monthlyRent" min="0"
                                    placeholder="e.g., 750">
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="moveInDate">Available Move-in Date</label>
                            <input type="date" id="moveInDate" name="moveInDate">
                        </div>
                        <div class="form-group">
                            <label for="roommatePreferences">Roommate Preferences</label>
                            <textarea id="roommatePreferences" name="roommatePreferences"
                                placeholder="e.g., Looking for clean, quiet professional or student. No smoking, pets okay."></textarea>
                        </div>
                        <div class="form-group">
                            <label for="description">Additional Description</label>
                            <textarea id="description" name="description"
                                placeholder="Any additional information about the room, house rules, utilities included, etc."></textarea>
                        </div>
                    </div>

                    <!-- Contact Information -->
                    <h3 style="margin: 30px 0 20px 0; color: #333;">Contact Information</h3>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="contactEmail">Email</label>
                            <input type="email" id="contactEmail" name="contactEmail" placeholder="your@email.com">
                        </div>
                        <div class="form-group">
                            <label for="contactPhone">Phone</label>
                            <input type="tel" id="contactPhone" name="contactPhone" placeholder="(123) 456-7890">
                        </div>
                    </div>

                    <button type="submit" id="submitBtn">Post Property</button>
                </form>
            </div>
        </div>
    </div>

    <!-- JavaScript -->
    <script src="app.js"></script>
    <script async defer
        src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCHYttlS9AIVEKzfzn74dte3NMwIDy-WoE&libraries=places,geometry&callback=initMap">
        </script>
</body>

</html>